@page "/login"
@layout Layout.MainLayout
@rendermode InteractiveServer
@inject Authentication Auth
@inject NavigationManager Nav
<PageTitle>Login</PageTitle>

<div class="login-background"></div>

<div class="div-login">
    <div class="immagine-logo">
        <img src="/images/Logo.png"/>
    </div>
    <div class="Box-Login-text">
        <p>Questo Ã¨ un piccolo gestionale creato Interamente da un singolo sviluppatore Leonardo Ringressi, spero diventi qualcosa di utile</p>
    </div>
    <div class="inputs-login">
        <input @bind="nome" @bind:event="oninput" type="text" placeholder="Nome Utente">
        <input @bind="password" @bind:event="oninput" type="password" placeholder="password">
        <button @onclick="DoLogin">Accedi</button>
        <p>@warning</p>
    </div>
</div>

@code{
    string password="";
    string nome="";
    string warning ="";
    private async Task DoLogin(){
        var ok = await Auth.LoginAsync(nome, password);

        if (ok)
            Nav.NavigateTo("/home");
        else
            warning = "Username o Password sbagliati";
    }
}

